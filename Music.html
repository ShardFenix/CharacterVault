<!DOCTYPE html>
<html>
<head>
<style>
.tab{
	font-size:20px;
	font-weight:bold;
	border: 2px solid #4c4c4c;
	background-color:#000;
	color:white;
	padding:6px 0px;
	margin-left:-8px;
	width:14%;
	display:inline-block;
	text-align:center;
	cursor:pointer;
	font-family: 'Cinzel Decorative';
	
	-webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.tab.activetab{
	background-color:#bb0000;
}


.leftitem{
	text-align: center;
    background-color: #ffdb77;
    border: 1px groove black;
    margin: 2px;
    padding: 4px;
    font-size: 20px;
}
.sidepalette .leftitem{
	display:inline-grid;
	padding:4px 8px;
}

.slidecontainer {
    width: 100%;
}

.slider {
    -webkit-appearance: none;
    width: 100%;
    height: 15px;
    border-radius: 5px;
    background: #d3d3d3;
    outline: none;
    opacity: 0.7;
    -webkit-transition: .2s;
    transition: opacity .2s;
}

.soundItem{
	display:flex;
}

.soundItem span{
	display:block;
	flex: 1;
}

.soundItem .slider{
	flex: 2;
}

.slider:hover {
    opacity: 1;
}

.slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 25px;
    height: 25px;
    border-radius: 50%;
    background: #4CAF50;
    cursor: pointer;
}

.slider::-moz-range-thumb {
    width: 25px;
    height: 25px;
    border-radius: 50%;
    background: #4CAF50;
    cursor: pointer;
}
.dropbox {
    padding: 10px;
    border: 1px solid black;
    vertical-align: top;
    margin-top: 15px;
    min-height: 30px;
}

.borderheader{
    margin-top: -24px;
    display: block;
    font-size: 24px;
    background-color: #707070;
    width: fit-content;
}

.soundGroup {
    border: 1px solid black;
    padding: 5px;
}

.slider-row{
	margin: 8px 0px;
	display:flex;
}

.slider-row span{
	flex: 1;
}

.slider-row .slider{
	flex: 2;
}

.header {
    font-size: 24px;
    text-align: center;
}

</style>
<!--
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-animate.js"></script>
-->
<script src="libs/jquery.min.js"></script>
<script src="libs/angular.min.js"></script>
<script src="libs/angular-animate.js"></script>
<script src="core/dragndrop.js"></script>

<script src="libs/audiometadata.js"></script>
</head>
<body style="background-color:#707070;">
<div ng-app="myApp">
<div ng-controller="MyController">

<div style="margin-top:-8px;">
<span class="tab" ng-click="tab='music'" ng-class="{'activetab':tab=='music'}">Music</span>
<span class="tab" ng-click="tab='sfx'" ng-class="{'activetab':tab=='sfx'}">SFX</span>
<span class="tab" ng-click="tab='environments'" ng-class="{'activetab':tab=='environments'}">Environments</span>
</div>


<div ng-show="tab==='music'">
	<table style="width:100%;"><tr>
	<td width="25%" style="vertical-align:top;">
		<div class="leftmenu">
			<div class="leftitem" ng-repeat="folder in musicFolders" ng-click="openSecondaryFolder('Music/'+folder)">
				{{folder}}
			</div>
		</div>
	</td>
	<td width="25%" style="vertical-align:top;">
		<div class="secondmenu">
			<div class="leftitem" ng-repeat="file in musicFiles" ng-click="loadMusic(primaryFolder+file)">
				{{file}}
			</div>
		</div>
	</td>
	<td width="25%" style="vertical-align:top;">
		
	</td>
	<td width="25%">
		 <input type="range" min="0" max="100" value="50" class="slider" ng-model="volume">
		 <br>
		 <div class="leftitem" ng-click="fade=1">Stop</div>
	</td>

	</tr>
	</table>
</div>

<div ng-show="tab==='sfx'">
	<div>
		<div class="">Master Volume</div>
		<input type="range" min="0" max="100" value="50" class="slider" ng-model="sfxVolume">
	</div>
	<div style="grid-template-columns: 20%">
		<div ng-repeat="file in sfx" ng-attr-name="file.fullName" class="griditem"
			ng-click="playSound(file)">{{file}}</div>
	</div>
</div>

<div ng-show="tab==='environments'">
<table style="width:100%">
	<thead>
		<tr>
			<th>Environments</th>
			<th>Data</th>
			<th></th>
		</tr>
	</thead>
	<tbody><tr>
		<td style="width:200px;vertical-align:top;">
			<div ng-repeat="env in environments" class="leftitem" ng-click="loadEnvironment(env)">{{env.name}}</div>
		</td>
		<td style="width:400px;vertical-align:top;">
			<div class="button" ng-click="newEnvironment()">New Environmenr</div>
			<div ng-show="selectedEnvironment">
				<div>
					<input type="text" ng-model="selectedEnvironment.name" placeholder="Name"/>
				</div>
				<div class="dropbox" ng-drop-target on-drop="dropLoop(source,target)">
					<span class="borderheader">Loops</span>
					<div ng-repeat="loop in selectedEnvironment.loops" class="soundItem">
						<span>{{loop.name}}</span>
						<input type="range" min="0" max="1" step="0.01" value="0.5" class="slider" ng-model="loop.volume" ng-change="updateLoopVolume(loop)">
					</div>
				</div>
				<div class="dropbox" ng-drop-target on-drop="dropSfx(source,target)">
					<span class="borderheader">SFX</span>
					<div ng-repeat="soundGroup in selectedEnvironment.oneShots" class="soundGroup" >
						<div class="slider-row">
							<span>Min Interval: {{soundGroup.intervalMin}}</span>
							<input type="range" min="1" max="200" value="20" class="slider" ng-model="soundGroup.intervalMin">
						</div>
						<div class="slider-row">
							<span>Max Interval: {{soundGroup.intervalMax}}</span>
							<input type="range" min="1" max="200" value="30" class="slider" ng-model="soundGroup.intervalMax">
						</div>
						<div class="slider-row">
							<span>Min Volume</span>
							<input type="range" min="0" max="1" step="0.01" value="0.5" class="slider" ng-model="soundGroup.volumeMin">
						</div>
						<div class="slider-row">
							<span>Max Volume</span>
							<input type="range" min="0" max="1" step="0.01" value="0.5" class="slider" ng-model="soundGroup.volumeMax">
						</div>
						<div ng-drop-target on-drop="dropSubSfx(source,target)">
							<div class="header">Files</div>
							<div ng-repeat="file in soundGroup.files" class="soundItem">
								<span>{{file}}</span>
								<input type="range" min="0" max="100" value="50" class="slider" ng-model="loop.volume" ng-change="updateLoopVolume(loop)">
							</div>
						</div>
					</div>
				</div>
			</div>
		</td>


		<td>
			<div class="sidepalette">
				<div ng-repeat="mus in musicList" class="leftitem" ng-click="">{{mus}}</div>
			</div>
			<div class="sidepalette">
				<div ng-repeat="loop in loops" class="leftitem" ng-click="">{{loop.name}}</div>
			</div>
			<div class="sidepalette">
				<div ng-repeat="sfx in oneShots" class="leftitem" ng-click="playSound(sfx.filename)" ng-draggable >{{sfx.name}}</div>
			</div>
		</td>

	</tr>
	</tbody>
</table>
</div>


</div></div>

<script src="./core/music.js"></script>


</body>
</html>